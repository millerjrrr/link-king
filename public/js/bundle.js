const t=()=>{const t=document.querySelector(".alert");t&&t.parentElement.removeChild(t)},e=(e,a)=>{t();const n=`<div class="alert alert--${e}">${a}</div>`;document.querySelector("body").insertAdjacentHTML("afterbegin",n),window.setTimeout(t,1e3)},a=t=>{const e={"á":"a","é":"e","í":"i","ó":"o","ú":"u","à":"a","è":"e","ì":"i","ò":"o","ù":"u","â":"a","ê":"e","î":"i","ô":"o","û":"u","ã":"a","õ":"o","ñ":"n","ç":"c"};return(t=t.toLowerCase()).replace(/[áéíóúàèìòùâêîôûãõñç]/gi,(function(t){return e[t]})).replace(/['"!@#$%¨&*\[\]\(\)_\-`´\{\}^~<,>.:;?/\+\-\=]/g,"")},n=(t,e,...a)=>{let n=document.createElement(t);for(let t of Object.keys(e))n.setAttribute(t,e[t]);for(let t of a)n.appendChild(t);return n},s=()=>{document.getElementById("dictionarynotification").setAttribute("style","visibility: hidden")},o=()=>{document.getElementById("dictionarynotification").setAttribute("style","visibility: visible")},d=async t=>{const a=t.target.parentNode.firstChild.innerText;"success"===(await axios.post("/api/v1/tickets",{target:a})).data.status?e("success","This word has been added to your queue"):e("error","This word is already in your queue")},l=[],c=[];for(i=0;i<10;++i)l.push(document.getElementById(`rc${i}`));for(i=0;i<4;++i)c.push(document.getElementById(`te${i}`));let r,p,u,m,h,y,g,f,v,$,x,I,E,w=document.getElementById("attempt"),B=document.getElementById("due"),b=document.getElementById("steps"),M=document.getElementById("timeplaying"),T=0,C=10;w&&(w.style.borderRadius="15px",f={left:0,top:0},v=2,$=w.clientWidth,x=w.clientHeight,I=1*w.style.borderRadius.slice(0,-2),E=2*x+2*$-8*I+2*Math.PI*I);let P,k,L=document.getElementById("border");const S=(t=10)=>{clearTimeout(p),O(),A(2,t-2),p=setTimeout(D,1e3*t)},O=()=>{for(let t=1;t<=E;++t)document.getElementById(`point${t}`).style.visibility="visible"},A=(t=2,e=8)=>{clearInterval(u);let a=1,n=1;const i=1e3*e/E;u=setInterval((function(){a>1e3*t/i&&n<=E&&(document.getElementById(`point${n}`).style.visibility="hidden",n+=1),a+=1,T+=i}),i)},D=()=>{g>1?(G(),g-=1,q(),S(C)):(G(),O(),clearInterval(u),clearTimeout(p),j(!1),clearInterval(m),w.value="")},q=()=>{r=2==g?"hsl(32, 92%, 65%)":1==g?"hsl(0, 84%, 71%)":"hsl(0, 0%, 100%)",document.getElementById("attempt").setAttribute("style",`color: ${r}`),(()=>{for(let t=1;t<=E;++t)document.getElementById(`point${t}`).style.backgroundColor=r})()};function N(t){if(H.src.match("/img/soundOn.png")){const e=new SpeechSynthesisUtterance(t);e.lang="pt-BR",speechSynthesis.speak(e)}}const j=async t=>{try{const e=await axios.post("/api/v1/gameData/submitAttempt",{correct:t,time:T});T=0,"success"===e.data.status&&(R(e.data),y=e.data.data.attempt.solutions,g=e.data.data.tries,q(),N(e.data.data.attempt.target))}catch(t){console.log(t)}};function G(){let t=Math.PI/2;requestAnimationFrame((function e(a,n){null!=n&&(t+=.1*(a-n)),w.style.top=5*Math.sin(t)+"px",w.style.left=5*Math.cos(t)+"px",t<10*Math.PI&&requestAnimationFrame((t=>e(t,a)))}))}const R=t=>{for(i=0;i<9;++i)l[i+1].innerText=t.data.raceTrack[i];for(l[0].innerText=t.data.attempt.target,i=0;i<4;++i)c[i].innerText=t.data.tail[i]||"";B.innerText=t.data.stats.due,b.innerText=t.data.stats.steps,M.innerText=`${Math.floor(t.data.stats.time/6e4)}:${(Math.floor(t.data.stats.time/1e3)-60*Math.floor(t.data.stats.time/6e4)).toString().padStart(2,"0")}`,h=t.data.stats.time,C=t.data.timer?10:20,t.data.blurred&&(document.getElementById("racetrack").style="visibility:hidden")};function _(t){return t.toString().padStart(2,"0")}function F(){h+=1e3,document.getElementById("timeplaying").innerText=function(t){let e=Math.floor(t/1e3),a=Math.floor(e/60),n=Math.floor(a/60);return e%=60,a%=60,n>0?`${n}:${_(a)}:${_(e)}`:`${a}:${_(e)}`}(h)}w&&(function(){for(i=1;i<=E;++i)i<$/2-I?L.appendChild(n("div",{class:"point",id:`point${i}`,style:`width:${v}px; height:${v}px;\n    left:${f.left+$/2+i-v/2}px ; \n    top:${f.top-v/2}px;\n    `})):i<$/2-I+Math.PI*I/2?(k=Math.PI/2-(i-$/2+I)/I,L.appendChild(n("div",{class:"point",id:`point${i}`,style:`width:${v}px; height:${v}px;\n      left:${f.left+$-I+I*Math.cos(k)-v/2}px ; \n      top:${f.top+I-I*Math.sin(k)-v/2}px;\n      `}))):i<$/2-3*I+Math.PI*I/2+x?L.appendChild(n("div",{class:"point",id:`point${i}`,style:`width:${v}px; height:${v}px;\n      left:${f.left+$-v/2}px ; \n      top:${f.top+I+i-($/2-I+Math.PI*I/2)-v/2}px;\n      `})):i<$/2-3*I+Math.PI*I+x?L.appendChild(n("div",{class:"point",id:`point${i}`,style:`width:${v}px; height:${v}px;\n      left:${f.left+$-I+I*Math.cos((i-($/2-3*I+Math.PI*I/2+x))/I)-v/2}px ; \n      top:${f.top+x-I+I*Math.sin((i-($/2-3*I+Math.PI*I/2+x))/I)-v/2}px;\n      `})):i<3*$/2-5*I+Math.PI*I+x?L.appendChild(n("div",{class:"point",id:`point${i}`,style:`width:${v}px; height:${v}px;\n      left:${f.left+$-I-i+$/2-3*I+Math.PI*I+x-v/2}px ; \n      top:${f.top+x-v/2}px;\n      `})):i<3*$/2-5*I+3*Math.PI*I/2+x?(P=i-(3*$/2-5*I+Math.PI*I+x),k=Math.PI/2+P/I,L.appendChild(n("div",{class:"point",id:`point${i}`,style:`width:${v}px; height:${v}px;\n      left:${f.left+I+I*Math.cos(-k)-v/2}px ; \n      top:${f.top+x-I-I*Math.sin(-k)-v/2}px;\n      `}))):i<3*$/2-7*I+3*Math.PI*I/2+2*x?(P=i-(3*$/2-5*I+3*Math.PI*I/2+x),L.appendChild(n("div",{class:"point",id:`point${i}`,style:`width:${v}px; height:${v}px;\n      left:${f.left-v/2}px ; \n      top:${f.top+x-I-P-v/2}px;\n      `}))):i<3*$/2-7*I+2*Math.PI*I+2*x?(P=i-(3*$/2-7*I+3*Math.PI*I/2+2*x),L.appendChild(n("div",{class:"point",id:`point${i}`,style:`width:${v}px; height:${v}px;\n      left:${f.left+I-I*Math.cos(P/I)-v/2}px ; \n      top:${f.top+I-I*Math.sin(P/I)-v/2}px;\n      `}))):(P=i-(3*$/2-7*I+2*Math.PI*I+2*x),L.appendChild(n("div",{class:"point",id:`point${i}`,style:`width:${v}px; height:${v}px;\n      left:${f.left+I+P-v/2}px ; \n      top:${f.top-v/2}px;\n      `})))}(),(async()=>{try{const t=await axios.post("/api/v1/gameData/sendGameState");"success"===t.data.status&&(R(t.data),y=t.data.data.attempt.solutions,g=t.data.data.tries,q())}catch(t){console.log(t)}})()),w&&w.addEventListener("keydown",(async t=>{"Enter"==t.key&&(t.preventDefault(),((t,e)=>t.map((t=>a(t))).includes(a(e)))(y,w.value)?(j(!0),S(C),clearInterval(m),m=setInterval(F,1e3),w.value="",N()):(D(),N()))}));const H=document.getElementById("sound"),U=document.getElementById("blurred"),W=document.getElementById("soundBox"),z=document.getElementById("blurredBox");document.getElementById("timer1020"),document.getElementById("timer1020Box");const J=async t=>{sound="On"===t,H.src=`/img/sound${t}.png`,await axios.post("/api/v1/gameData/updateGameSettings",{sound:sound})},K=async t=>{blurred="On"===t,U.src=`/img/blurred${t}.png`,await axios.post("/api/v1/gameData/updateGameSettings",{blurred:blurred})};H&&W.addEventListener("click",(async t=>{H.src.match("/img/soundOff.png")?J("On"):(J("Off"),K("Off"),document.getElementById("racetrack").style="visibility:visible")})),U&&z.addEventListener("click",(async t=>{U.src.match("/img/blurredOff.png")?(K("On"),J("On"),document.getElementById("racetrack").style="visibility:hidden"):(K("Off"),document.getElementById("racetrack").style="visibility:visible")}));const Q=document.getElementById("loginform"),V=document.getElementById("signupform"),X=document.getElementById("logoutBtn");Q&&Q.addEventListener("submit",(t=>{t.preventDefault();(async(t,a)=>{try{"success"===(await axios.post("/api/v1/users/login",{email:t,password:a})).data.status&&e("success","Logged in successfully"),window.setTimeout((()=>{location.assign("/")}),1500)}catch(t){e("error",t.response.data.msg)}})(document.getElementById("email").value,document.getElementById("password").value)})),V&&V.addEventListener("submit",(t=>{t.preventDefault();(async(t,a,n,i)=>{try{"success"===(await axios.post("/api/v1/users/signup",{username:t,email:a,password:n,passwordConfirm:i})).data.status&&e("success","New account created! Log in!"),window.setTimeout((()=>{location.assign("/login")}),1500)}catch(t){e("error",t.response.data.msg)}})(document.getElementById("username").value,document.getElementById("email").value,document.getElementById("password").value,document.getElementById("passwordConfirm").value)})),X&&X.addEventListener("click",(t=>{(async()=>{try{"success"===(await axios.get("/api/v1/users/logout")).data.status&&(e("success","Logged out successfully!"),window.setTimeout((()=>{location.assign("/")}),1500))}catch(t){e("error","Error logging out! Try again.")}})()}));const Y=document.getElementById("searchdictionary"),Z=()=>(async t=>{const i=a(t);try{const t=await axios.get(`/api/v1/pt-en-dictionary?pattern=^${i}`),e=document.getElementById("dictionarytable");e.removeChild(e.firstChild);const a=document.createElement("tbody");e.appendChild(a),console.log(t.data.data);let l,c=0;for(let e of t.data.data.dicEntries)l=n("tr",{id:`row${c}`,class:"nav__el"},n("td",{id:`target${c}`,class:"leftcolumn",translate:"no"},document.createTextNode(e.target)),n("td",{class:"rightcolumn",translate:"no"},document.createTextNode(e.solutions.toString().split(",").join(" // "))),n("td",{class:"addfield"},document.createTextNode("+"))),a.appendChild(l),l.addEventListener("mouseover",(t=>{o()})),l.addEventListener("mouseleave",(t=>{s()})),l.addEventListener("click",(t=>{d(t)})),c+=1}catch(t){e("error","Somethings not right")}})(Y.value);Y&&(Z(),Y.addEventListener("keydown",(async t=>{clearTimeout(p),p=setTimeout(Z,500)})));
//# sourceMappingURL=bundle.js.map
