const e=()=>{const e=document.querySelector(".alert");e&&e.parentElement.removeChild(e)},t=(t,n)=>{e();const a=`<div class="alert alert--${t}">${n}</div>`;document.querySelector("body").insertAdjacentHTML("afterbegin",a),window.setTimeout(e,3e3)},n=()=>{const e=document.querySelector(".pop");e&&e.parentElement.removeChild(e)},a=(e,t)=>{n();let a=document.createElement("div");a.setAttribute("class",`pop pop_${e}`),a.innerHTML="R"!==t?"L"+t:"R",document.getElementById("formx").appendChild(a);const s=1e3;let i=1;const o=setInterval((()=>{a.setAttribute("style",`opacity:${(103-i)/103}; transform: translate(${i/5}px,${-i/2}px)`),i+=1}),10);window.setTimeout((()=>{"R"!==t&&"correct"===e&&(a.innerHTML="L"+(1*t+1)),"R"!==t&&"correct"!==e&&(a.innerHTML="L1")}),500),window.setTimeout((()=>{clearTimeout(o),n()}),s)},s=(t,n)=>{e();const a=`<div class="alert alert--${t}">${n}</div>`;document.querySelector("body").insertAdjacentHTML("afterbegin",a),window.setTimeout(e,1e3)},o=e=>(e=>{const t={"á":"a","é":"e","í":"i","ó":"o","ú":"u","à":"a","è":"e","ì":"i","ò":"o","ù":"u","â":"a","ê":"e","î":"i","ô":"o","û":"u","ã":"a","õ":"o","ñ":"n","ç":"c"};return(e=e.toLowerCase()).replace(/[áéíóúàèìòùâêîôûãõñç]/gi,(function(e){return t[e]})).replace(/['"!@#$%¨&*\[\]\(\)_\-`´\{\}^~<,>.:;?/\+\-\=]/g,"")})(e).replace(/ /g,""),d=(e,t,...n)=>{let a=document.createElement(e);for(let e of Object.keys(t))a.setAttribute(e,t[e]);for(let e of n)a.appendChild(e);return a};function l(e){return e.toString().padStart(2,"0")}const r=()=>{document.getElementById("dictionarynotification").setAttribute("style","visibility: hidden")},c=()=>{document.getElementById("dictionarynotification").setAttribute("style","visibility: visible")},m=async e=>{const t=e.target.parentNode.firstChild.innerText;"success"===(await axios.post("/api/v1/tickets",{target:t})).data.status?s("success","This word has been added to your queue"):s("error","This word is already in your queue")},u=[],p=[];for(i=0;i<5;++i)u.push(document.getElementById(`rc${i}`));for(i=0;i<4;++i)p.push(document.getElementById(`te${i}`));let y,g,h,f,v,I,E,$,x,w,B,b,M,T,L,C=document.getElementById("attempt"),P=document.getElementById("due"),k=document.getElementById("steps"),S=document.getElementById("timeplaying"),A=0,O=10;S&&(B=1*S.innerHTML),document.getElementById("solutions")&&(b=JSON.parse(document.getElementById("solutions").innerHTML)),document.getElementById("tries")&&(M=document.getElementById("tries").innerHTML),document.getElementById("level")&&(T=document.getElementById("level").innerHTML),document.getElementById("speechLang")&&(L=document.getElementById("speechLang").innerHTML),C&&(C.style.borderRadius="15px",v={left:0,top:0},I=2,E=C.clientWidth,$=C.clientHeight,x=1*C.style.borderRadius.slice(0,-2),w=2*$+2*E-8*x+2*Math.PI*x);let H,N,q=document.getElementById("border");const D=(e=10)=>{clearTimeout(g),R(),_(2,e-2),g=setTimeout(j,1e3*e)},R=()=>{for(let e=1;e<=w;++e)document.getElementById(`point${e}`).style.visibility="visible"},_=(e=2,t=8)=>{clearInterval(h);let n=1,a=1;const s=1e3*t/w;h=setInterval((function(){n>1e3*e/s&&a<=w&&(document.getElementById(`point${a}`).style.visibility="hidden",a+=1),n+=1,A+=s}),s)},j=()=>{M>1?(U(),M-=1,G(),D(O),clearInterval(f),f=setInterval(K,100)):(a("incorrect",T),U(),R(),clearInterval(h),clearTimeout(g),J(!1).then((()=>{clearInterval(f),C.value=""})))},G=()=>{y=2==M?"hsl(32, 92%, 65%)":1==M?"hsl(0, 84%, 71%)":"hsl(0, 0%, 100%)",document.getElementById("attempt").setAttribute("style",`color: ${y}`),(()=>{for(let e=1;e<=w;++e)document.getElementById(`point${e}`).style.backgroundColor=y})()};function F(e,t="pt-BR"){if(Q.src.match("/img/soundOn.png")){const n=new SpeechSynthesisUtterance(e);n.lang=t,speechSynthesis.speak(n)}}const J=async e=>{try{const t=await axios.post("/api/v1/gameData/submitAttempt",{correct:e,time:A});A=0,"success"===t.data.status&&(W(t.data),G(),F(t.data.data.attempt.target,t.data.data.speechLang))}catch(e){t("error",e)}};function U(){let e=Math.PI/2;requestAnimationFrame((function t(n,a){null!=a&&(e+=.1*(n-a)),C.style.top=5*Math.sin(e)+"px",C.style.left=5*Math.cos(e)+"px",e<10*Math.PI&&requestAnimationFrame((e=>t(e,n)))}))}const W=e=>{for(i=0;i<5;++i)u[i].innerText=e.data.raceTrack[i];for(i=0;i<4;++i)p[i].innerText=e.data.tail[i]||"";L=e.data.speechLang,P.innerText=e.data.stats.due,k.innerText=e.data.stats.steps,S.innerText=`${Math.floor(e.data.stats.time/6e4)}:${(Math.floor(e.data.stats.time/1e3)-60*Math.floor(e.data.stats.time/6e4)).toString().padStart(2,"0")}`,B=e.data.stats.time,O=e.data.timer?10:20,e.data.blurred&&(document.getElementById("racetrack").style="visibility:hidden"),b=e.data.attempt.solutions,M=e.data.tries,T=e.data.attempt.level?e.data.attempt.level:"R"};let z=!0;function K(){B+=100,document.getElementById("timeplaying").innerText=(e=>{let t=Math.floor(e/1e3),n=Math.floor(t/60),a=Math.floor(n/60);return t%=60,n%=60,a>0?`${a}:${l(n)}:${l(t)}`:`${n}:${l(t)}`})(B)}C&&C.addEventListener("keydown",(async e=>{"Enter"==e.key&&(e.preventDefault(),z&&(((e,t)=>e.map((e=>o(e))).includes(o(t)))(b,C.value)?(z=!1,a("correct",T),J(!0).then((()=>{D(O),clearInterval(f),f=setInterval(K,100),C.value="",z=!0}))):j()))}));const Q=document.getElementById("sound"),V=document.getElementById("blurred"),X=document.getElementById("soundBox"),Y=document.getElementById("blurredBox"),Z=document.getElementById("timer1020"),ee=document.getElementById("timer1020Box"),te=async e=>{sound="On"===e,Q.src=`/img/sound${e}.png`,await axios.post("/api/v1/gameData/updateGameSettings",{sound:sound})},ne=async e=>{blurred="On"===e,V.src=`/img/blurred${e}.png`,await axios.post("/api/v1/gameData/updateGameSettings",{blurred:blurred})};Q&&X.addEventListener("click",(async e=>{Q.src.match("/img/soundOff.png")?te("On"):(te("Off"),ne("Off"),document.getElementById("racetrack").style="visibility:visible")})),V&&Y.addEventListener("click",(async e=>{V.src.match("/img/blurredOff.png")?(ne("On"),te("On"),document.getElementById("racetrack").style="visibility:hidden"):(ne("Off"),document.getElementById("racetrack").style="visibility:visible")})),Z&&ee.addEventListener("click",(async e=>{"10s"===Z.innerText?(Z.innerText="20s",O=20,await axios.post("/api/v1/gameData/updateGameSettings",{timer:!1})):(Z.innerText="10s",O=10,await axios.post("/api/v1/gameData/updateGameSettings",{timer:!0}))})),C&&(!function(){for(i=1;i<=w;++i)i<E/2-x?q.appendChild(d("div",{class:"point",id:`point${i}`,style:`width:${I}px; height:${I}px;\n    left:${v.left+E/2+i-I/2}px ; \n    top:${v.top-I/2}px;\n    `})):i<E/2-x+Math.PI*x/2?(N=Math.PI/2-(i-E/2+x)/x,q.appendChild(d("div",{class:"point",id:`point${i}`,style:`width:${I}px; height:${I}px;\n      left:${v.left+E-x+x*Math.cos(N)-I/2}px ; \n      top:${v.top+x-x*Math.sin(N)-I/2}px;\n      `}))):i<E/2-3*x+Math.PI*x/2+$?q.appendChild(d("div",{class:"point",id:`point${i}`,style:`width:${I}px; height:${I}px;\n      left:${v.left+E-I/2}px ; \n      top:${v.top+x+i-(E/2-x+Math.PI*x/2)-I/2}px;\n      `})):i<E/2-3*x+Math.PI*x+$?q.appendChild(d("div",{class:"point",id:`point${i}`,style:`width:${I}px; height:${I}px;\n      left:${v.left+E-x+x*Math.cos((i-(E/2-3*x+Math.PI*x/2+$))/x)-I/2}px ; \n      top:${v.top+$-x+x*Math.sin((i-(E/2-3*x+Math.PI*x/2+$))/x)-I/2}px;\n      `})):i<3*E/2-5*x+Math.PI*x+$?q.appendChild(d("div",{class:"point",id:`point${i}`,style:`width:${I}px; height:${I}px;\n      left:${v.left+E-x-i+E/2-3*x+Math.PI*x+$-I/2}px ; \n      top:${v.top+$-I/2}px;\n      `})):i<3*E/2-5*x+3*Math.PI*x/2+$?(H=i-(3*E/2-5*x+Math.PI*x+$),N=Math.PI/2+H/x,q.appendChild(d("div",{class:"point",id:`point${i}`,style:`width:${I}px; height:${I}px;\n      left:${v.left+x+x*Math.cos(-N)-I/2}px ; \n      top:${v.top+$-x-x*Math.sin(-N)-I/2}px;\n      `}))):i<3*E/2-7*x+3*Math.PI*x/2+2*$?(H=i-(3*E/2-5*x+3*Math.PI*x/2+$),q.appendChild(d("div",{class:"point",id:`point${i}`,style:`width:${I}px; height:${I}px;\n      left:${v.left-I/2}px ; \n      top:${v.top+$-x-H-I/2}px;\n      `}))):i<3*E/2-7*x+2*Math.PI*x+2*$?(H=i-(3*E/2-7*x+3*Math.PI*x/2+2*$),q.appendChild(d("div",{class:"point",id:`point${i}`,style:`width:${I}px; height:${I}px;\n      left:${v.left+x-x*Math.cos(H/x)-I/2}px ; \n      top:${v.top+x-x*Math.sin(H/x)-I/2}px;\n      `}))):(H=i-(3*E/2-7*x+2*Math.PI*x+2*$),q.appendChild(d("div",{class:"point",id:`point${i}`,style:`width:${I}px; height:${I}px;\n      left:${v.left+x+H-I/2}px ; \n      top:${v.top-I/2}px;\n      `})))}(),G(),K());const ae=document.getElementById("loginform"),se=document.getElementById("signupform"),ie=document.getElementById("logoutBtn"),oe=document.getElementById("forgotpasswordform"),de=document.getElementById("resetpasswordform");ae&&ae.addEventListener("submit",(e=>{e.preventDefault();(async(e,n)=>{try{"success"===(await axios.post("/api/v1/users/login",{email:e,password:n})).data.status&&t("success","Logged in successfully"),window.setTimeout((()=>{location.assign("/")}),1500)}catch(e){if(t("error",e.response.data.msg),!document.getElementById("forgotP")){const e=document.createElement("a");e.id="forgotP",e.innerHTML="Forgot Password?",e.className="form_btn",e.href="/forgot-password",document.getElementById("formholder").appendChild(e)}}})(document.getElementById("email").value,document.getElementById("password").value)})),se&&se.addEventListener("submit",(e=>{e.preventDefault();(async(e,n,a,s)=>{try{"success"===(await axios.post("/api/v1/users/signup",{username:e,email:n,password:a,passwordConfirm:s})).data.status&&t("success","New account created!"),window.setTimeout((()=>{location.assign("/")}),1500)}catch(e){t("error",e)}})(document.getElementById("username").value,document.getElementById("email").value,document.getElementById("password").value,document.getElementById("passwordConfirm").value)})),ie&&ie.addEventListener("click",(e=>{(async()=>{try{"success"===(await axios.get("/api/v1/users/logout")).data.status&&(t("success","Logged out successfully!"),window.setTimeout((()=>{location.assign("/")}),1500))}catch(e){t("error","Error logging out! Try again.")}})()})),oe&&oe.addEventListener("submit",(e=>{e.preventDefault();(async e=>{try{"success"===(await axios.post("/api/v1/users/forgotPassword",{email:e})).data.status&&t("success","Code has been sent"),window.setTimeout((()=>{location.assign(`/password-reset?email=${e}`)}),1500)}catch(e){t("error",e.response.data.msg)}})(document.getElementById("email").value)})),de&&de.addEventListener("submit",(e=>{e.preventDefault();(async(e,n,a)=>{try{"success"===(await axios.patch("/api/v1/users/resetPassword",{token:e,password:n,passwordConfirm:a})).data.status&&t("success","Password updated successfully"),window.setTimeout((()=>{location.assign("/")}),3e3)}catch(e){t("error",e.response.data.msg)}})(document.getElementById("token").value,document.getElementById("password").value,document.getElementById("passwordConfirm").value)}));const le=document.getElementById("searchdictionary"),re=()=>(async e=>{try{const t=await axios.get(`/api/v1/dictionary?pattern=^${e}`),n=document.getElementById("dictionarytable");n.removeChild(n.firstChild);const a=document.createElement("tbody");n.appendChild(a);let s,i=0;for(let e of t.data.data.dicEntries)s=d("tr",{id:`row${i}`,class:"nav_el",style:""},d("td",{id:`target${i}`,class:"leftcolumn",translate:"no"},document.createTextNode(e.target)),d("td",{class:"rightcolumn",translate:"no"},document.createTextNode(e.solutions.toString().split(",").join(" // "))),d("td",{class:"addfield"},document.createTextNode("+"))),a.appendChild(s),s.addEventListener("mouseover",(e=>{c()})),s.addEventListener("mouseleave",(e=>{r()})),s.addEventListener("click",(e=>{m(e)})),i+=1}catch(e){t("error","Somethings not right")}})(le.value);le&&(re(),le.addEventListener("keydown",(async e=>{clearTimeout(g),g=setTimeout(re,500)})));const ce=()=>{F(u[0].innerText,L),document.querySelector("header").classList.add("apply-styles-A"),document.getElementsByClassName("logo_container")[0].classList.add("apply-styles-B"),document.getElementsByClassName("filler_block")[0].classList.add("apply-styles-B"),window.scrollTo({top:0,behavior:"auto"})},me=()=>{document.querySelector("header").classList.remove("apply-styles-A"),document.getElementsByClassName("logo_container")[0].classList.remove("apply-styles-B"),document.getElementsByClassName("filler_block")[0].classList.remove("apply-styles-B")};C&&(C.addEventListener("click",ce),C.addEventListener("blur",me));
//# sourceMappingURL=bundle.js.map
