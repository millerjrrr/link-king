const t=()=>{const t=document.querySelector(".alert");t&&t.parentElement.removeChild(t)},e=(e,n)=>{t();const i=`<div class="alert alert--${e}">${n}</div>`;document.querySelector("body").insertAdjacentHTML("afterbegin",i),window.setTimeout(t,3e3)},n=()=>{const t=document.querySelector(".pop");t&&t.parentElement.removeChild(t)},a=(t,e)=>{n();let i=document.createElement("div");i.setAttribute("class",`pop pop_${t}`),i.innerHTML="R"!==e?"L"+e:"R",document.getElementById("formx").appendChild(i);const a=1e3;let s=1;const o=setInterval((()=>{i.setAttribute("style",`opacity:${(103-s)/103}; transform: translate(${s/5}px,${-s/2}px)`),s+=1}),10);window.setTimeout((()=>{"R"!==e&&"correct"===t&&(i.innerHTML="L"+(1*e+1)),"R"!==e&&"correct"!==t&&(i.innerHTML="L1")}),500),window.setTimeout((()=>{clearTimeout(o),n()}),a)},s=(e,n)=>{t();const i=`<div class="alert alert--${e}">${n}</div>`;document.querySelector("body").insertAdjacentHTML("afterbegin",i),window.setTimeout(t,1e3)},o=t=>{const e={"á":"a","é":"e","í":"i","ó":"o","ú":"u","à":"a","è":"e","ì":"i","ò":"o","ù":"u","â":"a","ê":"e","î":"i","ô":"o","û":"u","ã":"a","õ":"o","ñ":"n","ç":"c"};return(t=t.toLowerCase()).replace(/[áéíóúàèìòùâêîôûãõñç]/gi,(function(t){return e[t]})).replace(/['"!@#$%¨&*\[\]\(\)_\-`´\{\}^~<,>.:;?/\+\-\=]/g,"")},d=t=>o(t).replace(/ /g,""),r=(t,e,...n)=>{let i=document.createElement(t);for(let t of Object.keys(e))i.setAttribute(t,e[t]);for(let t of n)i.appendChild(t);return i};function l(t){return t.toString().padStart(2,"0")}const c=()=>{document.getElementById("dictionarynotification").setAttribute("style","visibility: hidden")},m=()=>{document.getElementById("dictionarynotification").setAttribute("style","visibility: visible")},u=async t=>{const e=t.target.parentNode.firstChild.innerText;"success"===(await axios.post("/api/v1/tickets",{target:e})).data.status?s("success","This word has been added to your queue"):s("error","This word is already in your queue")},p=[],y=[];for(i=0;i<5;++i)p.push(document.getElementById(`rc${i}`));for(i=0;i<4;++i)y.push(document.getElementById(`te${i}`));let g,h,f,v,I,E,$,w,x,B,b,M,T,L,C=document.getElementById("attempt"),P=document.getElementById("due"),k=document.getElementById("steps"),S=document.getElementById("timeplaying"),O=0,H=10;S&&(b=1*S.innerHTML),document.getElementById("solutions")&&(M=JSON.parse(document.getElementById("solutions").innerHTML)),document.getElementById("tries")&&(T=document.getElementById("tries").innerHTML),document.getElementById("level")&&(L=document.getElementById("level").innerHTML),C&&(C.style.borderRadius="15px",I={left:0,top:0},E=2,$=C.clientWidth,w=C.clientHeight,x=1*C.style.borderRadius.slice(0,-2),B=2*w+2*$-8*x+2*Math.PI*x);let A,D,q=document.getElementById("border");const R=(t=10)=>{clearTimeout(h),N(),j(2,t-2),h=setTimeout(G,1e3*t)},N=()=>{for(let t=1;t<=B;++t)document.getElementById(`point${t}`).style.visibility="visible"},j=(t=2,e=8)=>{clearInterval(f);let n=1,i=1;const a=1e3*e/B;f=setInterval((function(){n>1e3*t/a&&i<=B&&(document.getElementById(`point${i}`).style.visibility="hidden",i+=1),n+=1,O+=a}),a)},G=()=>{T>1?(J(),T-=1,_(),R(H),clearInterval(v),v=setInterval(W,100)):(a("incorrect",L),J(),N(),clearInterval(f),clearTimeout(h),z(!1),clearInterval(v),C.value="")},_=()=>{g=2==T?"hsl(32, 92%, 65%)":1==T?"hsl(0, 84%, 71%)":"hsl(0, 0%, 100%)",document.getElementById("attempt").setAttribute("style",`color: ${g}`),(()=>{for(let t=1;t<=B;++t)document.getElementById(`point${t}`).style.backgroundColor=g})()};function F(t){if(K.src.match("/img/soundOn.png")){const e=new SpeechSynthesisUtterance(t);e.lang="pt-BR",speechSynthesis.speak(e)}}const z=async t=>{try{const e=await axios.post("/api/v1/gameData/submitAttempt",{correct:t,time:O});O=0,"success"===e.data.status&&(U(e.data),_(),F(e.data.data.attempt.target))}catch(t){e("error",t)}};function J(){let t=Math.PI/2;requestAnimationFrame((function e(n,i){null!=i&&(t+=.1*(n-i)),C.style.top=5*Math.sin(t)+"px",C.style.left=5*Math.cos(t)+"px",t<10*Math.PI&&requestAnimationFrame((t=>e(t,n)))}))}const U=t=>{for(i=0;i<5;++i)p[i].innerText=t.data.raceTrack[i];for(i=0;i<4;++i)y[i].innerText=t.data.tail[i]||"";P.innerText=t.data.stats.due,k.innerText=t.data.stats.steps,S.innerText=`${Math.floor(t.data.stats.time/6e4)}:${(Math.floor(t.data.stats.time/1e3)-60*Math.floor(t.data.stats.time/6e4)).toString().padStart(2,"0")}`,b=t.data.stats.time,H=t.data.timer?10:20,t.data.blurred&&(document.getElementById("racetrack").style="visibility:hidden"),M=t.data.attempt.solutions,T=t.data.tries,L=t.data.attempt.level?t.data.attempt.level:"R"};function W(){b+=100,document.getElementById("timeplaying").innerText=(t=>{let e=Math.floor(t/1e3),n=Math.floor(e/60),i=Math.floor(n/60);return e%=60,n%=60,i>0?`${i}:${l(n)}:${l(e)}`:`${n}:${l(e)}`})(b)}C&&C.addEventListener("keydown",(async t=>{"Enter"==t.key&&(t.preventDefault(),((t,e)=>t.map((t=>d(t))).includes(d(e)))(M,C.value)?(a("correct",L),z(!0),R(H),clearInterval(v),v=setInterval(W,100),C.value="",F()):(G(),F()))}));const K=document.getElementById("sound"),Q=document.getElementById("blurred"),V=document.getElementById("soundBox"),X=document.getElementById("blurredBox"),Y=document.getElementById("timer1020"),Z=document.getElementById("timer1020Box"),tt=async t=>{sound="On"===t,K.src=`/img/sound${t}.png`,await axios.post("/api/v1/gameData/updateGameSettings",{sound:sound})},et=async t=>{blurred="On"===t,Q.src=`/img/blurred${t}.png`,await axios.post("/api/v1/gameData/updateGameSettings",{blurred:blurred})};K&&V.addEventListener("click",(async t=>{K.src.match("/img/soundOff.png")?tt("On"):(tt("Off"),et("Off"),document.getElementById("racetrack").style="visibility:visible")})),Q&&X.addEventListener("click",(async t=>{Q.src.match("/img/blurredOff.png")?(et("On"),tt("On"),document.getElementById("racetrack").style="visibility:hidden"):(et("Off"),document.getElementById("racetrack").style="visibility:visible")})),Y&&Z.addEventListener("click",(async t=>{"10s"===Y.innerText?(Y.innerText="20s",H=20,await axios.post("/api/v1/gameData/updateGameSettings",{timer:!1})):(Y.innerText="10s",H=10,await axios.post("/api/v1/gameData/updateGameSettings",{timer:!0}))})),C&&(!function(){for(i=1;i<=B;++i)i<$/2-x?q.appendChild(r("div",{class:"point",id:`point${i}`,style:`width:${E}px; height:${E}px;\n    left:${I.left+$/2+i-E/2}px ; \n    top:${I.top-E/2}px;\n    `})):i<$/2-x+Math.PI*x/2?(D=Math.PI/2-(i-$/2+x)/x,q.appendChild(r("div",{class:"point",id:`point${i}`,style:`width:${E}px; height:${E}px;\n      left:${I.left+$-x+x*Math.cos(D)-E/2}px ; \n      top:${I.top+x-x*Math.sin(D)-E/2}px;\n      `}))):i<$/2-3*x+Math.PI*x/2+w?q.appendChild(r("div",{class:"point",id:`point${i}`,style:`width:${E}px; height:${E}px;\n      left:${I.left+$-E/2}px ; \n      top:${I.top+x+i-($/2-x+Math.PI*x/2)-E/2}px;\n      `})):i<$/2-3*x+Math.PI*x+w?q.appendChild(r("div",{class:"point",id:`point${i}`,style:`width:${E}px; height:${E}px;\n      left:${I.left+$-x+x*Math.cos((i-($/2-3*x+Math.PI*x/2+w))/x)-E/2}px ; \n      top:${I.top+w-x+x*Math.sin((i-($/2-3*x+Math.PI*x/2+w))/x)-E/2}px;\n      `})):i<3*$/2-5*x+Math.PI*x+w?q.appendChild(r("div",{class:"point",id:`point${i}`,style:`width:${E}px; height:${E}px;\n      left:${I.left+$-x-i+$/2-3*x+Math.PI*x+w-E/2}px ; \n      top:${I.top+w-E/2}px;\n      `})):i<3*$/2-5*x+3*Math.PI*x/2+w?(A=i-(3*$/2-5*x+Math.PI*x+w),D=Math.PI/2+A/x,q.appendChild(r("div",{class:"point",id:`point${i}`,style:`width:${E}px; height:${E}px;\n      left:${I.left+x+x*Math.cos(-D)-E/2}px ; \n      top:${I.top+w-x-x*Math.sin(-D)-E/2}px;\n      `}))):i<3*$/2-7*x+3*Math.PI*x/2+2*w?(A=i-(3*$/2-5*x+3*Math.PI*x/2+w),q.appendChild(r("div",{class:"point",id:`point${i}`,style:`width:${E}px; height:${E}px;\n      left:${I.left-E/2}px ; \n      top:${I.top+w-x-A-E/2}px;\n      `}))):i<3*$/2-7*x+2*Math.PI*x+2*w?(A=i-(3*$/2-7*x+3*Math.PI*x/2+2*w),q.appendChild(r("div",{class:"point",id:`point${i}`,style:`width:${E}px; height:${E}px;\n      left:${I.left+x-x*Math.cos(A/x)-E/2}px ; \n      top:${I.top+x-x*Math.sin(A/x)-E/2}px;\n      `}))):(A=i-(3*$/2-7*x+2*Math.PI*x+2*w),q.appendChild(r("div",{class:"point",id:`point${i}`,style:`width:${E}px; height:${E}px;\n      left:${I.left+x+A-E/2}px ; \n      top:${I.top-E/2}px;\n      `})))}(),_(),W(),F(p[0].innerText));const nt=document.getElementById("loginform"),it=document.getElementById("signupform"),at=document.getElementById("logoutBtn"),st=document.getElementById("forgotpasswordform"),ot=document.getElementById("resetpasswordform");nt&&nt.addEventListener("submit",(t=>{t.preventDefault();(async(t,n)=>{try{"success"===(await axios.post("/api/v1/users/login",{email:t,password:n})).data.status&&e("success","Logged in successfully"),window.setTimeout((()=>{location.assign("/")}),1500)}catch(t){if(e("error",t.response.data.msg),!document.getElementById("forgotP")){const t=document.createElement("a");t.id="forgotP",t.innerHTML="Forgot Password?",t.className="form_btn",t.href="/forgot-password",document.getElementById("formholder").appendChild(t)}}})(document.getElementById("email").value,document.getElementById("password").value)})),it&&it.addEventListener("submit",(t=>{t.preventDefault();(async(t,n,i,a)=>{try{"success"===(await axios.post("/api/v1/users/signup",{username:t,email:n,password:i,passwordConfirm:a})).data.status&&e("success","New account created!"),window.setTimeout((()=>{location.assign("/")}),1500)}catch(t){e("error",t)}})(document.getElementById("username").value,document.getElementById("email").value,document.getElementById("password").value,document.getElementById("passwordConfirm").value)})),at&&at.addEventListener("click",(t=>{(async()=>{try{"success"===(await axios.get("/api/v1/users/logout")).data.status&&(e("success","Logged out successfully!"),window.setTimeout((()=>{location.assign("/")}),1500))}catch(t){e("error","Error logging out! Try again.")}})()})),st&&st.addEventListener("submit",(t=>{t.preventDefault();(async t=>{try{"success"===(await axios.post("/api/v1/users/forgotPassword",{email:t})).data.status&&e("success","Code has been sent"),window.setTimeout((()=>{location.assign(`/password-reset?email=${t}`)}),1500)}catch(t){e("error",t.response.data.msg)}})(document.getElementById("email").value)})),ot&&ot.addEventListener("submit",(t=>{t.preventDefault();(async(t,n,i)=>{try{"success"===(await axios.patch("/api/v1/users/resetPassword",{token:t,password:n,passwordConfirm:i})).data.status&&e("success","Password updated successfully"),window.setTimeout((()=>{location.assign("/")}),3e3)}catch(t){e("error",t.response.data.msg)}})(document.getElementById("token").value,document.getElementById("password").value,document.getElementById("passwordConfirm").value)}));const dt=document.getElementById("searchdictionary"),rt=()=>(async t=>{const n=o(t);try{const t=await axios.get(`/api/v1/dictionary?pattern=^${n}`),e=document.getElementById("dictionarytable");e.removeChild(e.firstChild);const i=document.createElement("tbody");e.appendChild(i);let a,s=0;for(let e of t.data.data.dicEntries)a=r("tr",{id:`row${s}`,class:"nav_el",style:""},r("td",{id:`target${s}`,class:"leftcolumn",translate:"no"},document.createTextNode(e.target)),r("td",{class:"rightcolumn",translate:"no"},document.createTextNode(e.solutions.toString().split(",").join(" // "))),r("td",{class:"addfield"},document.createTextNode("+"))),i.appendChild(a),a.addEventListener("mouseover",(t=>{m()})),a.addEventListener("mouseleave",(t=>{c()})),a.addEventListener("click",(t=>{u(t)})),s+=1}catch(t){e("error","Somethings not right")}})(dt.value);dt&&(rt(),dt.addEventListener("keydown",(async t=>{clearTimeout(h),h=setTimeout(rt,500)}))),document.addEventListener("DOMContentLoaded",(function(){const t=document.body,e=window.innerHeight;window.addEventListener("resize",(()=>{window.innerHeight<e?(t.classList.add("keyboard-active"),document.documentElement.style.height="25rem"):(t.classList.remove("keyboard-active"),document.documentElement.style.height="100%")}))}));
//# sourceMappingURL=bundle.js.map
