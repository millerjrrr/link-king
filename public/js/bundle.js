const t=()=>{const t=document.querySelector(".alert");t&&t.parentElement.removeChild(t)},e=(e,i)=>{t();const a=`<div class="alert alert--${e}">${i}</div>`;document.querySelector("body").insertAdjacentHTML("afterbegin",a),window.setTimeout(t,5e3)},a=[],n=[];for(i=0;i<10;++i)a.push(document.getElementById(`rc${i}`));for(i=0;i<4;++i)n.push(document.getElementById(`te${i}`));let s,o,l,d,p,c,r,u,h,m,g,y=document.getElementById("attempt");y&&(y.style.borderRadius="15px",c={left:0,top:0},r=2,u=y.clientWidth,h=y.clientHeight,m=1*y.style.borderRadius.slice(0,-2),g=2*h+2*u-8*m+2*Math.PI*m);const $=(t,e,...i)=>{let a=document.createElement(t);for(let t of Object.keys(e))a.setAttribute(t,e[t]);for(let t of i)a.appendChild(t);return a};let f,x,I=document.getElementById("border");const v=(t=10)=>{clearTimeout(o),w(),M(),o=setTimeout(E,1e3*t)},w=()=>{for(let t=1;t<=g;++t)document.getElementById(`point${t}`).style.visibility="visible"},M=(t=2,e=8)=>{clearInterval(l);let i=1,a=1;const n=1e3*e/g;l=setInterval((function(){i>1e3*t/n&&a<=g&&(document.getElementById(`point${a}`).style.visibility="hidden",a+=1),i+=1}),n)},E=()=>{p>1?(b(),p-=1,P(),v()):(b(),w(),clearInterval(l),clearTimeout(o),B(!1),y.value="")},P=()=>{s=2==p?"hsl(32, 92%, 65%)":1==p?"hsl(0, 84%, 71%)":"hsl(0, 0%, 100%)",document.getElementById("attempt").setAttribute("style",`color: ${s}`),(()=>{for(let t=1;t<=g;++t)document.getElementById(`point${t}`).style.backgroundColor=s})()},B=async t=>{try{const e=await axios.post("/api/v1/gameData/submitAttempt",{correct:t});"success"===e.data.status&&(C(e.data),d=e.data.data.attempt.solutions,p=e.data.data.tries,P())}catch(t){console.log(t)}};function b(){let t=Math.PI/2;requestAnimationFrame((function e(i,a){null!=a&&(t+=.1*(i-a)),y.style.top=5*Math.sin(t)+"px",y.style.left=5*Math.cos(t)+"px",t<10*Math.PI&&requestAnimationFrame((t=>e(t,i)))}))}const C=t=>{for(i=0;i<9;++i)a[i+1].innerText=t.data.raceTrack[i];for(a[0].innerText=t.data.attempt.target,i=0;i<4;++i)n[i].innerText=t.data.tail[i]||""};y&&(function(){for(i=1;i<=g;++i)i<u/2-m?I.appendChild($("div",{class:"point",id:`point${i}`,style:`width:${r}px; height:${r}px;\n    left:${c.left+u/2+i-r/2}px ; \n    top:${c.top-r/2}px;\n    `})):i<u/2-m+Math.PI*m/2?(x=Math.PI/2-(i-u/2+m)/m,I.appendChild($("div",{class:"point",id:`point${i}`,style:`width:${r}px; height:${r}px;\n      left:${c.left+u-m+m*Math.cos(x)-r/2}px ; \n      top:${c.top+m-m*Math.sin(x)-r/2}px;\n      `}))):i<u/2-3*m+Math.PI*m/2+h?I.appendChild($("div",{class:"point",id:`point${i}`,style:`width:${r}px; height:${r}px;\n      left:${c.left+u-r/2}px ; \n      top:${c.top+m+i-(u/2-m+Math.PI*m/2)-r/2}px;\n      `})):i<u/2-3*m+Math.PI*m+h?I.appendChild($("div",{class:"point",id:`point${i}`,style:`width:${r}px; height:${r}px;\n      left:${c.left+u-m+m*Math.cos((i-(u/2-3*m+Math.PI*m/2+h))/m)-r/2}px ; \n      top:${c.top+h-m+m*Math.sin((i-(u/2-3*m+Math.PI*m/2+h))/m)-r/2}px;\n      `})):i<3*u/2-5*m+Math.PI*m+h?I.appendChild($("div",{class:"point",id:`point${i}`,style:`width:${r}px; height:${r}px;\n      left:${c.left+u-m-i+u/2-3*m+Math.PI*m+h-r/2}px ; \n      top:${c.top+h-r/2}px;\n      `})):i<3*u/2-5*m+3*Math.PI*m/2+h?(f=i-(3*u/2-5*m+Math.PI*m+h),x=Math.PI/2+f/m,I.appendChild($("div",{class:"point",id:`point${i}`,style:`width:${r}px; height:${r}px;\n      left:${c.left+m+m*Math.cos(-x)-r/2}px ; \n      top:${c.top+h-m-m*Math.sin(-x)-r/2}px;\n      `}))):i<3*u/2-7*m+3*Math.PI*m/2+2*h?(f=i-(3*u/2-5*m+3*Math.PI*m/2+h),I.appendChild($("div",{class:"point",id:`point${i}`,style:`width:${r}px; height:${r}px;\n      left:${c.left-r/2}px ; \n      top:${c.top+h-m-f-r/2}px;\n      `}))):i<3*u/2-7*m+2*Math.PI*m+2*h?(f=i-(3*u/2-7*m+3*Math.PI*m/2+2*h),I.appendChild($("div",{class:"point",id:`point${i}`,style:`width:${r}px; height:${r}px;\n      left:${c.left+m-m*Math.cos(f/m)-r/2}px ; \n      top:${c.top+m-m*Math.sin(f/m)-r/2}px;\n      `}))):(f=i-(3*u/2-7*m+2*Math.PI*m+2*h),I.appendChild($("div",{class:"point",id:`point${i}`,style:`width:${r}px; height:${r}px;\n      left:${c.left+m+f-r/2}px ; \n      top:${c.top-r/2}px;\n      `})))}(),(async()=>{try{const t=await axios.post("/api/v1/gameData/sendGameState");"success"===t.data.status&&(await C(t.data),d=t.data.data.attempt.solutions,p=t.data.data.tries)}catch(t){console.log(t)}})()),y&&y.addEventListener("keydown",(async t=>{"Enter"==t.key&&(t.preventDefault(),((t,e)=>{function i(t){const e={"á":"a","é":"e","í":"i","ó":"o","ú":"u","à":"a","è":"e","ì":"i","ò":"o","ù":"u","â":"a","ê":"e","î":"i","ô":"o","û":"u","ã":"a","õ":"o","ñ":"n","ç":"c"};return(t=t.toLowerCase()).replace(/[áéíóúàèìòùâêîôûãõñç]/gi,(function(t){return e[t]})).replace(/['"!@#$%¨&*\[\]\(\)_\-`´\{\}^~<,>.:;?/\+\-\=]/g,"")}return t.map((t=>i(t))).includes(i(e))})(d,y.value)?(B(!0),v(),y.value=""):E())}));const T=document.getElementById("loginform"),L=document.getElementById("signupform"),k=document.getElementById("logoutBtn");T&&T.addEventListener("submit",(t=>{t.preventDefault();(async(t,i)=>{try{"success"===(await axios.post("/api/v1/users/login",{email:t,password:i})).data.status&&e("success","Logged in successfully"),window.setTimeout((()=>{location.assign("/")}),1500)}catch(t){e("error",t.response.data.msg)}})(document.getElementById("email").value,document.getElementById("password").value)})),L&&L.addEventListener("submit",(t=>{t.preventDefault();(async(t,i,a,n)=>{try{"success"===(await axios.post("/api/v1/users/signup",{username:t,email:i,password:a,passwordConfirm:n})).data.status&&e("success","New account created! Log in!"),window.setTimeout((()=>{location.assign("/login")}),1500)}catch(t){e("error",t.response.data.msg)}})(document.getElementById("username").value,document.getElementById("email").value,document.getElementById("password").value,document.getElementById("passwordConfirm").value)})),k&&k.addEventListener("click",(t=>{(async()=>{try{"success"===(await axios.get("/api/v1/users/logout")).data.status&&(e("success","Logged out successfully!"),window.setTimeout((()=>{location.assign("/")}),1500))}catch(t){e("error","Error logging out! Try again.")}})()}));
//# sourceMappingURL=bundle.js.map
