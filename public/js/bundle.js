const t=()=>{const t=document.querySelector(".alert");t&&t.parentElement.removeChild(t)},e=(e,n)=>{t();const i=`<div class="alert alert--${e}">${n}</div>`;document.querySelector("body").insertAdjacentHTML("afterbegin",i),window.setTimeout(t,1e3)},n=t=>{const e={"á":"a","é":"e","í":"i","ó":"o","ú":"u","à":"a","è":"e","ì":"i","ò":"o","ù":"u","â":"a","ê":"e","î":"i","ô":"o","û":"u","ã":"a","õ":"o","ñ":"n","ç":"c"};return(t=t.toLowerCase()).replace(/[áéíóúàèìòùâêîôûãõñç]/gi,(function(t){return e[t]})).replace(/['"! @#$%¨&*\[\]\(\)_\-`´\{\}^~<,>.:;?/\+\-\=]/g,"")},a=(t,e,...n)=>{let i=document.createElement(t);for(let t of Object.keys(e))i.setAttribute(t,e[t]);for(let t of n)i.appendChild(t);return i},s=()=>{document.getElementById("dictionarynotification").setAttribute("style","visibility: hidden")},o=()=>{document.getElementById("dictionarynotification").setAttribute("style","visibility: visible")},d=async t=>{const n=t.target.parentNode.firstChild.innerText;"success"===(await axios.post("/api/v1/tickets",{target:n})).data.status?e("success","This word has been added to your queue"):e("error","This word is already in your queue")},l=[],r=[];for(i=0;i<20;++i)l.push(document.getElementById(`rc${i}`));for(i=0;i<4;++i)r.push(document.getElementById(`te${i}`));let c,p,u,m,g,h,y,f,v,x,$=document.getElementById("attempt"),I=document.getElementById("due"),E=document.getElementById("steps"),B=document.getElementById("timeplaying"),w=0,M=1*B.innerHTML,b=10,T=JSON.parse(document.getElementById("solutions").innerHTML),C=document.getElementById("tries").innerText;$&&($.style.borderRadius="15px",g={left:0,top:0},h=2,y=$.clientWidth,f=$.clientHeight,v=1*$.style.borderRadius.slice(0,-2),x=2*f+2*y-8*v+2*Math.PI*v);let P,L,k=document.getElementById("border");const S=(t=10)=>{clearTimeout(p),O(),A(2,t-2),p=setTimeout(D,1e3*t)},O=()=>{for(let t=1;t<=x;++t)document.getElementById(`point${t}`).style.visibility="visible"},A=(t=2,e=8)=>{clearInterval(u);let n=1,i=1;const a=1e3*e/x;u=setInterval((function(){n>1e3*t/a&&i<=x&&(document.getElementById(`point${i}`).style.visibility="hidden",i+=1),n+=1,w+=a}),a)},D=()=>{C>1?(H(),C-=1,q(),S(b),clearInterval(m),m=setInterval(_,100)):(H(),O(),clearInterval(u),clearTimeout(p),G(!1),clearInterval(m),$.value="")},q=()=>{c=2==C?"hsl(32, 92%, 65%)":1==C?"hsl(0, 84%, 71%)":"hsl(0, 0%, 100%)",document.getElementById("attempt").setAttribute("style",`color: ${c}`),(()=>{for(let t=1;t<=x;++t)document.getElementById(`point${t}`).style.backgroundColor=c})()};function N(t){if(F.src.match("/img/soundOn.png")){const e=new SpeechSynthesisUtterance(t);e.lang="pt-BR",speechSynthesis.speak(e)}}const G=async t=>{try{const e=await axios.post("/api/v1/gameData/submitAttempt",{correct:t,time:w});w=0,"success"===e.data.status&&(j(e.data),T=e.data.data.attempt.solutions,C=e.data.data.tries,q(),N(e.data.data.attempt.target))}catch(t){console.log(t)}};function H(){let t=Math.PI/2;requestAnimationFrame((function e(n,i){null!=i&&(t+=.1*(n-i)),$.style.top=5*Math.sin(t)+"px",$.style.left=5*Math.cos(t)+"px",t<10*Math.PI&&requestAnimationFrame((t=>e(t,n)))}))}const j=t=>{for(i=0;i<20;++i)l[i].innerText=t.data.raceTrack[i];for(i=0;i<4;++i)r[i].innerText=t.data.tail[i]||"";I.innerText=t.data.stats.due,E.innerText=t.data.stats.steps,B.innerText=`${Math.floor(t.data.stats.time/6e4)}:${(Math.floor(t.data.stats.time/1e3)-60*Math.floor(t.data.stats.time/6e4)).toString().padStart(2,"0")}`,M=t.data.stats.time,b=t.data.timer?10:20,t.data.blurred&&(document.getElementById("racetrack").style="visibility:hidden")};function R(t){return t.toString().padStart(2,"0")}function _(){M+=100,document.getElementById("timeplaying").innerText=function(t){let e=Math.floor(t/1e3),n=Math.floor(e/60),i=Math.floor(n/60);return e%=60,n%=60,i>0?`${i}:${R(n)}:${R(e)}`:`${n}:${R(e)}`}(M)}$&&$.addEventListener("keydown",(async t=>{"Enter"==t.key&&(t.preventDefault(),((t,e)=>t.map((t=>n(t))).includes(n(e)))(T,$.value)?(G(!0),S(b),clearInterval(m),m=setInterval(_,100),$.value="",N()):(D(),N()))}));const F=document.getElementById("sound"),J=document.getElementById("blurred"),U=document.getElementById("soundBox"),W=document.getElementById("blurredBox"),z=document.getElementById("timer1020"),K=document.getElementById("timer1020Box"),Q=async t=>{sound="On"===t,F.src=`/img/sound${t}.png`,await axios.post("/api/v1/gameData/updateGameSettings",{sound:sound})},V=async t=>{blurred="On"===t,J.src=`/img/blurred${t}.png`,await axios.post("/api/v1/gameData/updateGameSettings",{blurred:blurred})};F&&U.addEventListener("click",(async t=>{F.src.match("/img/soundOff.png")?Q("On"):(Q("Off"),V("Off"),document.getElementById("racetrack").style="visibility:visible")})),J&&W.addEventListener("click",(async t=>{J.src.match("/img/blurredOff.png")?(V("On"),Q("On"),document.getElementById("racetrack").style="visibility:hidden"):(V("Off"),document.getElementById("racetrack").style="visibility:visible")})),z&&K.addEventListener("click",(async t=>{"10s"===z.innerText?(z.innerText="20s",b=20,await axios.post("/api/v1/gameData/updateGameSettings",{timer:!1})):(z.innerText="10s",b=10,await axios.post("/api/v1/gameData/updateGameSettings",{timer:!0}))})),$&&(!function(){for(i=1;i<=x;++i)i<y/2-v?k.appendChild(a("div",{class:"point",id:`point${i}`,style:`width:${h}px; height:${h}px;\n    left:${g.left+y/2+i-h/2}px ; \n    top:${g.top-h/2}px;\n    `})):i<y/2-v+Math.PI*v/2?(L=Math.PI/2-(i-y/2+v)/v,k.appendChild(a("div",{class:"point",id:`point${i}`,style:`width:${h}px; height:${h}px;\n      left:${g.left+y-v+v*Math.cos(L)-h/2}px ; \n      top:${g.top+v-v*Math.sin(L)-h/2}px;\n      `}))):i<y/2-3*v+Math.PI*v/2+f?k.appendChild(a("div",{class:"point",id:`point${i}`,style:`width:${h}px; height:${h}px;\n      left:${g.left+y-h/2}px ; \n      top:${g.top+v+i-(y/2-v+Math.PI*v/2)-h/2}px;\n      `})):i<y/2-3*v+Math.PI*v+f?k.appendChild(a("div",{class:"point",id:`point${i}`,style:`width:${h}px; height:${h}px;\n      left:${g.left+y-v+v*Math.cos((i-(y/2-3*v+Math.PI*v/2+f))/v)-h/2}px ; \n      top:${g.top+f-v+v*Math.sin((i-(y/2-3*v+Math.PI*v/2+f))/v)-h/2}px;\n      `})):i<3*y/2-5*v+Math.PI*v+f?k.appendChild(a("div",{class:"point",id:`point${i}`,style:`width:${h}px; height:${h}px;\n      left:${g.left+y-v-i+y/2-3*v+Math.PI*v+f-h/2}px ; \n      top:${g.top+f-h/2}px;\n      `})):i<3*y/2-5*v+3*Math.PI*v/2+f?(P=i-(3*y/2-5*v+Math.PI*v+f),L=Math.PI/2+P/v,k.appendChild(a("div",{class:"point",id:`point${i}`,style:`width:${h}px; height:${h}px;\n      left:${g.left+v+v*Math.cos(-L)-h/2}px ; \n      top:${g.top+f-v-v*Math.sin(-L)-h/2}px;\n      `}))):i<3*y/2-7*v+3*Math.PI*v/2+2*f?(P=i-(3*y/2-5*v+3*Math.PI*v/2+f),k.appendChild(a("div",{class:"point",id:`point${i}`,style:`width:${h}px; height:${h}px;\n      left:${g.left-h/2}px ; \n      top:${g.top+f-v-P-h/2}px;\n      `}))):i<3*y/2-7*v+2*Math.PI*v+2*f?(P=i-(3*y/2-7*v+3*Math.PI*v/2+2*f),k.appendChild(a("div",{class:"point",id:`point${i}`,style:`width:${h}px; height:${h}px;\n      left:${g.left+v-v*Math.cos(P/v)-h/2}px ; \n      top:${g.top+v-v*Math.sin(P/v)-h/2}px;\n      `}))):(P=i-(3*y/2-7*v+2*Math.PI*v+2*f),k.appendChild(a("div",{class:"point",id:`point${i}`,style:`width:${h}px; height:${h}px;\n      left:${g.left+v+P-h/2}px ; \n      top:${g.top-h/2}px;\n      `})))}(),q(),_(),N(l[0].innerText));const X=document.getElementById("loginform"),Y=document.getElementById("signupform"),Z=document.getElementById("logoutBtn");X&&X.addEventListener("submit",(t=>{t.preventDefault();(async(t,n)=>{try{"success"===(await axios.post("/api/v1/users/login",{email:t,password:n})).data.status&&e("success","Logged in successfully"),window.setTimeout((()=>{location.assign("/")}),1500)}catch(t){e("error",t.response.data.msg)}})(document.getElementById("email").value,document.getElementById("password").value)})),Y&&Y.addEventListener("submit",(t=>{t.preventDefault();(async(t,n,i,a)=>{try{"success"===(await axios.post("/api/v1/users/signup",{username:t,email:n,password:i,passwordConfirm:a})).data.status&&e("success","New account created! Log in!"),window.setTimeout((()=>{location.assign("/login")}),1500)}catch(t){e("error",t.response.data.msg)}})(document.getElementById("username").value,document.getElementById("email").value,document.getElementById("password").value,document.getElementById("passwordConfirm").value)})),Z&&Z.addEventListener("click",(t=>{(async()=>{try{"success"===(await axios.get("/api/v1/users/logout")).data.status&&(e("success","Logged out successfully!"),window.setTimeout((()=>{location.assign("/")}),1500))}catch(t){e("error","Error logging out! Try again.")}})()}));const tt=document.getElementById("searchdictionary"),et=()=>(async t=>{const i=n(t);try{const t=await axios.get(`/api/v1/pt-en-dictionary?pattern=^${i}`),e=document.getElementById("dictionarytable");e.removeChild(e.firstChild);const n=document.createElement("tbody");e.appendChild(n),console.log(t.data.data);let l,r=0;for(let e of t.data.data.dicEntries)l=a("tr",{id:`row${r}`,class:"nav__el"},a("td",{id:`target${r}`,class:"leftcolumn",translate:"no"},document.createTextNode(e.target)),a("td",{class:"rightcolumn",translate:"no"},document.createTextNode(e.solutions.toString().split(",").join(" // "))),a("td",{class:"addfield"},document.createTextNode("+"))),n.appendChild(l),l.addEventListener("mouseover",(t=>{o()})),l.addEventListener("mouseleave",(t=>{s()})),l.addEventListener("click",(t=>{d(t)})),r+=1}catch(t){e("error","Somethings not right")}})(tt.value);tt&&(et(),tt.addEventListener("keydown",(async t=>{clearTimeout(p),p=setTimeout(et,500)})));
//# sourceMappingURL=bundle.js.map
