{"version":3,"file":"bundle.js","sources":["alerts.mjs","consoleFunctions.mjs","dictionary.mjs","index.mjs","forms.mjs"],"sourcesContent":["export const hideAlert = () => {\r\n  const el = document.querySelector('.alert');\r\n  if (el) el.parentElement.removeChild(el);\r\n};\r\n// type is 'success' or 'error'\r\nexport const showAlert = (type, msg) => {\r\n  hideAlert();\r\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\r\n  document\r\n    .querySelector('body')\r\n    .insertAdjacentHTML('afterbegin', markup);\r\n  window.setTimeout(hideAlert, 3000);\r\n};\r\n\r\nexport const hidePop = () => {\r\n  const el = document.querySelector('.pop');\r\n  if (el) el.parentElement.removeChild(el);\r\n};\r\n\r\n//type is correct or incorrect\r\nexport const showPop = (type, level) => {\r\n  hidePop();\r\n  let pop = document.createElement('div');\r\n  pop.setAttribute('class', `pop pop_${type}`);\r\n  if (level !== 'R') pop.innerHTML = 'L' + level;\r\n  else pop.innerHTML = 'R';\r\n  document.getElementById('formx').appendChild(pop);\r\n  const timeOut = 1000;\r\n  let i = 1;\r\n\r\n  const dimEl = () => {\r\n    pop.setAttribute(\r\n      'style',\r\n      `opacity:${(103 - i) / 103}; transform: translate(${\r\n        i / 5\r\n      }px,${-i / 2}px)`,\r\n    );\r\n    i += 1;\r\n  };\r\n  const interval = setInterval(dimEl, timeOut / 100);\r\n  const clearAll = () => {\r\n    clearTimeout(interval);\r\n    hidePop();\r\n  };\r\n\r\n  const changeLevelNumber = () => {\r\n    if (level !== 'R' && type === 'correct')\r\n      pop.innerHTML = 'L' + (level * 1 + 1);\r\n    if (level !== 'R' && type !== 'correct')\r\n      pop.innerHTML = 'L1';\r\n  };\r\n\r\n  window.setTimeout(changeLevelNumber, timeOut / 2);\r\n  window.setTimeout(clearAll, timeOut);\r\n};\r\n\r\nexport const hideDicAlert = () => {\r\n  const el = document.querySelector('.alert');\r\n  if (el) el.parentElement.removeChild(el);\r\n};\r\n// type is 'success' or 'error'\r\nexport const showDicAlert = (type, msg) => {\r\n  hideAlert();\r\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\r\n  document\r\n    .querySelector('body')\r\n    .insertAdjacentHTML('afterbegin', markup);\r\n  window.setTimeout(hideAlert, 1000);\r\n};\r\n","export const normalize = (inputString) => {\r\n  const accentsMap = {\r\n    á: 'a',\r\n    é: 'e',\r\n    í: 'i',\r\n    ó: 'o',\r\n    ú: 'u',\r\n    à: 'a',\r\n    è: 'e',\r\n    ì: 'i',\r\n    ò: 'o',\r\n    ù: 'u',\r\n    â: 'a',\r\n    ê: 'e',\r\n    î: 'i',\r\n    ô: 'o',\r\n    û: 'u',\r\n    ã: 'a',\r\n    õ: 'o',\r\n    ñ: 'n',\r\n    ç: 'c',\r\n  };\r\n\r\n  inputString = inputString.toLowerCase();\r\n\r\n  return inputString\r\n    .replace(/[áéíóúàèìòùâêîôûãõñç]/gi, function (matched) {\r\n      return accentsMap[matched];\r\n    })\r\n    .replace(\r\n      /['\"!@#$%¨&*\\[\\]\\(\\)_\\-`´\\{\\}^~<,>.:;?/\\+\\-\\=]/g,\r\n      '',\r\n    );\r\n};\r\n\r\nexport const normAndRemoveSpace = (inputString) => {\r\n  return normalize(inputString).replace(/ /g, '');\r\n};\r\n\r\nexport const answerAccepted = (solutions, answer) => {\r\n  const normalized = solutions.map((sol) =>\r\n    normAndRemoveSpace(sol),\r\n  );\r\n  return normalized.includes(normAndRemoveSpace(answer));\r\n};\r\n\r\nexport const elt = (name, attrs, ...children) => {\r\n  let dom = document.createElement(name);\r\n  for (let attr of Object.keys(attrs)) {\r\n    dom.setAttribute(attr, attrs[attr]);\r\n  }\r\n  for (let child of children) {\r\n    dom.appendChild(child);\r\n  }\r\n  return dom;\r\n};\r\n\r\n////////////////////////////////////////\r\n/////// Time Management\r\n\r\nfunction padTo2Digits(num) {\r\n  return num.toString().padStart(2, '0');\r\n}\r\n\r\nexport const convertMsToTime = (milliseconds) => {\r\n  let seconds = Math.floor(milliseconds / 1000);\r\n  let minutes = Math.floor(seconds / 60);\r\n  let hours = Math.floor(minutes / 60);\r\n\r\n  seconds = seconds % 60;\r\n  minutes = minutes % 60;\r\n  if (hours > 0)\r\n    return `${hours}:${padTo2Digits(\r\n      minutes,\r\n    )}:${padTo2Digits(seconds)}`;\r\n  else return `${minutes}:${padTo2Digits(seconds)}`;\r\n};\r\n","// const axios = require('axios');\r\nimport { elt, normalize } from './consoleFunctions.mjs';\r\nimport { showAlert, showDicAlert } from './alerts.mjs';\r\n\r\nexport const searchAndUpdate = async (pattern) => {\r\n  try {\r\n    const res = await axios.get(\r\n      `/api/v1/dictionary?pattern=^${pattern}`,\r\n    );\r\n    const table = document.getElementById(\r\n      'dictionarytable',\r\n    );\r\n    table.removeChild(table.firstChild);\r\n    const tbody = document.createElement('tbody');\r\n    table.appendChild(tbody);\r\n    let i = 0,\r\n      row;\r\n    for (let result of res.data.data.dicEntries) {\r\n      row = elt(\r\n        'tr',\r\n        { id: `row${i}`, class: 'nav_el', style: '' },\r\n        elt(\r\n          'td',\r\n          {\r\n            id: `target${i}`,\r\n            class: 'leftcolumn',\r\n            translate: 'no',\r\n          },\r\n          document.createTextNode(result.target),\r\n        ),\r\n        elt(\r\n          'td',\r\n          {\r\n            class: 'rightcolumn',\r\n            translate: 'no',\r\n          },\r\n          document.createTextNode(\r\n            result.solutions\r\n              .toString()\r\n              .split(',')\r\n              .join(' // '),\r\n          ),\r\n        ),\r\n        elt(\r\n          'td',\r\n          {\r\n            class: 'addfield',\r\n          },\r\n          document.createTextNode('+'),\r\n        ),\r\n      );\r\n      tbody.appendChild(row);\r\n      row.addEventListener('mouseover', (e) => {\r\n        visible();\r\n      });\r\n      row.addEventListener('mouseleave', (e) => {\r\n        hidden();\r\n      });\r\n      row.addEventListener('click', (e) => {\r\n        addWordToQueue(e);\r\n      });\r\n      i += 1;\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', 'Somethings not right');\r\n  }\r\n};\r\n\r\nconst hidden = () => {\r\n  document\r\n    .getElementById('dictionarynotification')\r\n    .setAttribute('style', 'visibility: hidden');\r\n};\r\n\r\nconst visible = () => {\r\n  document\r\n    .getElementById('dictionarynotification')\r\n    .setAttribute('style', 'visibility: visible');\r\n};\r\n\r\nconst addWordToQueue = async (e) => {\r\n  const target = e.target.parentNode.firstChild.innerText;\r\n  const res = await axios.post('/api/v1/tickets', {\r\n    target,\r\n  });\r\n\r\n  if (res.data.status === 'success') {\r\n    showDicAlert(\r\n      'success',\r\n      'This word has been added to your queue',\r\n    );\r\n  } else {\r\n    showDicAlert(\r\n      'error',\r\n      'This word is already in your queue',\r\n    );\r\n  }\r\n};\r\n","import {\r\n  login,\r\n  logout,\r\n  signup,\r\n  forgotPasswordSendCode,\r\n  resetPasswordUsingCode,\r\n} from './forms.mjs';\r\nimport {\r\n  elt,\r\n  answerAccepted,\r\n  convertMsToTime,\r\n} from './consoleFunctions.mjs';\r\nimport { searchAndUpdate } from './dictionary.mjs';\r\nimport { showPop, showAlert } from './alerts.mjs';\r\n\r\n////////////////////////////////////////////////////////////////////\r\n// Console elements\r\nconst raceTrack = [],\r\n  tail = [];\r\nfor (i = 0; i < 5; ++i)\r\n  raceTrack.push(document.getElementById(`rc${i}`));\r\nfor (i = 0; i < 4; ++i)\r\n  tail.push(document.getElementById(`te${i}`));\r\n\r\nlet form = document.getElementById('attempt'),\r\n  due = document.getElementById('due'),\r\n  steps = document.getElementById('steps'),\r\n  timeplaying = document.getElementById('timeplaying'),\r\n  formColor,\r\n  responseTimer, //countdown timer for how long left to respond\r\n  intervalTimer, //time management\r\n  sessionTimer,\r\n  time = 0, //time management\r\n  timeUp = 10, //time management\r\n  rect,\r\n  pointR,\r\n  a,\r\n  b,\r\n  radius,\r\n  perimeter,\r\n  timeplayingval,\r\n  solutions,\r\n  tries,\r\n  level,\r\n  speechLang;\r\n// settings variables\r\nif (timeplaying) timeplayingval = timeplaying.innerHTML * 1; //time management\r\nif (document.getElementById('solutions'))\r\n  solutions = JSON.parse(\r\n    document.getElementById('solutions').innerHTML,\r\n  );\r\nif (document.getElementById('tries'))\r\n  tries = document.getElementById('tries').innerHTML;\r\nif (document.getElementById('level'))\r\n  level = document.getElementById('level').innerHTML;\r\nif (document.getElementById('speechLang'))\r\n  speechLang =\r\n    document.getElementById('speechLang').innerHTML;\r\n\r\nif (form) {\r\n  form.style.borderRadius = '15px';\r\n  // rect = form.getBoundingClientRect();\r\n  rect = { left: 0, top: 0 };\r\n  pointR = 2;\r\n  a = form.clientWidth;\r\n  b = form.clientHeight;\r\n  radius = form.style.borderRadius.slice(0, -2) * 1;\r\n  perimeter =\r\n    b * 2 + a * 2 - radius * 8 + 2 * Math.PI * radius;\r\n}\r\n\r\nlet border = document.getElementById('border');\r\nlet rel, angle;\r\n\r\n//////////////////////////////////////////////////////////\r\n// CONSOLE FUNCTIONS\r\nconst startTheFormTimer = (timer = 10) => {\r\n  clearTimeout(responseTimer);\r\n  showBorder();\r\n  hideTheBorderInSeconds(2, timer - 2);\r\n  responseTimer = setTimeout(\r\n    wrongAnswerReturned,\r\n    timer * 1000,\r\n  );\r\n};\r\n\r\nconst showBorder = () => {\r\n  for (let i = 1; i <= perimeter; ++i)\r\n    document.getElementById(`point${i}`).style.visibility =\r\n      'visible';\r\n};\r\n\r\nconst hideTheBorderInSeconds = (delay = 2, timer = 8) => {\r\n  clearInterval(intervalTimer);\r\n  let j = 1,\r\n    i = 1;\r\n  const step = (timer * 1000) / perimeter;\r\n  function hideBorderPointWithDelay() {\r\n    const delayEnd = (delay * 1000) / step;\r\n    if (j > delayEnd && i <= perimeter) {\r\n      document.getElementById(\r\n        `point${i}`,\r\n      ).style.visibility = 'hidden';\r\n      i = i + 1;\r\n    }\r\n    j = j + 1;\r\n    time += step; // time management\r\n  }\r\n  intervalTimer = setInterval(\r\n    hideBorderPointWithDelay,\r\n    step,\r\n  );\r\n};\r\n\r\nconst wrongAnswerReturned = () => {\r\n  if (tries > 1) {\r\n    wrongWiggle();\r\n    tries -= 1;\r\n    updateColor();\r\n    startTheFormTimer(timeUp);\r\n    clearInterval(sessionTimer);\r\n    sessionTimer = setInterval(\r\n      updateSessionTimerDisplay,\r\n      100,\r\n    );\r\n  } else {\r\n    showPop('incorrect', level);\r\n    wrongWiggle();\r\n    showBorder();\r\n    clearInterval(intervalTimer);\r\n    clearTimeout(responseTimer);\r\n    sendResultAndUpdate(false).then(() => {\r\n      clearInterval(sessionTimer);\r\n      form.value = '';\r\n    });\r\n  }\r\n};\r\n\r\nconst updateBorderColor = () => {\r\n  for (let i = 1; i <= perimeter; ++i)\r\n    document.getElementById(\r\n      `point${i}`,\r\n    ).style.backgroundColor = formColor;\r\n};\r\n\r\nconst updateColor = () => {\r\n  if (tries == 2) formColor = 'hsl(32, 92%, 65%)';\r\n  else if (tries == 1) formColor = 'hsl(0, 84%, 71%)';\r\n  else formColor = 'hsl(0, 0%, 100%)';\r\n\r\n  document\r\n    .getElementById('attempt')\r\n    .setAttribute('style', `color: ${formColor}`);\r\n  updateBorderColor();\r\n};\r\n\r\nfunction speakText(text, language = 'pt-BR') {\r\n  if (soundControl.src.match(`/img/soundOn.png`)) {\r\n    const utterance = new SpeechSynthesisUtterance(text);\r\n    utterance.lang = language;\r\n    speechSynthesis.speak(utterance);\r\n  }\r\n}\r\n\r\nconst sendResultAndUpdate = async (correct) => {\r\n  try {\r\n    const res = await axios.post(\r\n      '/api/v1/gameData/submitAttempt',\r\n      { correct, time },\r\n    );\r\n    time = 0;\r\n    if (res.data.status === 'success') {\r\n      updateRaceTrackAndStats(res.data); // update a language variable\r\n      updateColor();\r\n      speakText(\r\n        res.data.data.attempt.target,\r\n        res.data.data.speechLang,\r\n      ); // RETURN TO HERE\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', err);\r\n  }\r\n};\r\n\r\nfunction wrongWiggle() {\r\n  let angle = Math.PI / 2;\r\n  function animate(time, lastTime) {\r\n    if (lastTime != null) {\r\n      angle += (time - lastTime) * 0.1;\r\n    }\r\n\r\n    form.style.top = Math.sin(angle) * 5 + 'px';\r\n    form.style.left = Math.cos(angle) * 5 + 'px';\r\n    if (angle < 10 * Math.PI)\r\n      requestAnimationFrame((newTime) =>\r\n        animate(newTime, time),\r\n      );\r\n  }\r\n  requestAnimationFrame(animate);\r\n}\r\n\r\nconst updateRaceTrackAndStats = (res) => {\r\n  for (i = 0; i < 5; ++i)\r\n    raceTrack[i].innerText = res.data.raceTrack[i];\r\n  for (i = 0; i < 4; ++i)\r\n    tail[i].innerText = res.data.tail[i] || '';\r\n  //updatestats\r\n  speechLang = res.data.speechLang;\r\n  due.innerText = res.data.stats.due;\r\n  steps.innerText = res.data.stats.steps;\r\n  timeplaying.innerText = `${Math.floor(\r\n    res.data.stats.time / (1000 * 60),\r\n  )}:${(\r\n    Math.floor(res.data.stats.time / 1000) -\r\n    60 * Math.floor(res.data.stats.time / (1000 * 60))\r\n  )\r\n    .toString()\r\n    .padStart(2, '0')}`;\r\n  timeplayingval = res.data.stats.time;\r\n  // update timeUp\r\n  if (res.data.timer) timeUp = 10;\r\n  else timeUp = 20;\r\n  //update settings block\r\n  if (res.data.blurred)\r\n    document.getElementById('racetrack').style =\r\n      'visibility:hidden';\r\n  // raceTrack[0].style = 'color: #1b1b1b; font-size: 50px;';\r\n  solutions = res.data.attempt.solutions;\r\n  tries = res.data.tries;\r\n  if (res.data.attempt.level)\r\n    level = res.data.attempt.level;\r\n  else level = 'R';\r\n};\r\n\r\nfunction drawFormBorder() {\r\n  //draw the border inside the forLoop\r\n  for (i = 1; i <= perimeter; ++i) {\r\n    if (i < a / 2 - radius) {\r\n      border.appendChild(\r\n        elt('div', {\r\n          class: 'point',\r\n          id: `point${i}`,\r\n          style: `width:${pointR}px; height:${pointR}px;\r\n    left:${rect.left + a / 2 + i - pointR / 2}px ; \r\n    top:${rect.top - pointR / 2}px;\r\n    `,\r\n        }),\r\n      );\r\n    } else if (\r\n      i <\r\n      a / 2 - radius + (Math.PI * radius) / 2\r\n    ) {\r\n      angle = Math.PI / 2 - (i - a / 2 + radius) / radius;\r\n      border.appendChild(\r\n        elt('div', {\r\n          class: 'point',\r\n          id: `point${i}`,\r\n          style: `width:${pointR}px; height:${pointR}px;\r\n      left:${\r\n        rect.left +\r\n        a -\r\n        radius +\r\n        radius * Math.cos(angle) -\r\n        pointR / 2\r\n      }px ; \r\n      top:${\r\n        rect.top +\r\n        radius -\r\n        radius * Math.sin(angle) -\r\n        pointR / 2\r\n      }px;\r\n      `,\r\n        }),\r\n      );\r\n    } else if (\r\n      i <\r\n      a / 2 - 3 * radius + (Math.PI * radius) / 2 + b\r\n    ) {\r\n      border.appendChild(\r\n        elt('div', {\r\n          class: 'point',\r\n          id: `point${i}`,\r\n          style: `width:${pointR}px; height:${pointR}px;\r\n      left:${rect.left + a - pointR / 2}px ; \r\n      top:${\r\n        rect.top +\r\n        radius +\r\n        i -\r\n        (a / 2 - radius + (Math.PI * radius) / 2) -\r\n        pointR / 2\r\n      }px;\r\n      `,\r\n        }),\r\n      );\r\n    } else if (\r\n      i <\r\n      a / 2 - 3 * radius + Math.PI * radius + b\r\n    ) {\r\n      border.appendChild(\r\n        elt('div', {\r\n          class: 'point',\r\n          id: `point${i}`,\r\n          style: `width:${pointR}px; height:${pointR}px;\r\n      left:${\r\n        rect.left +\r\n        a -\r\n        radius +\r\n        radius *\r\n          Math.cos(\r\n            (i -\r\n              (a / 2 -\r\n                3 * radius +\r\n                (Math.PI * radius) / 2 +\r\n                b)) /\r\n              radius,\r\n          ) -\r\n        pointR / 2\r\n      }px ; \r\n      top:${\r\n        rect.top +\r\n        b -\r\n        radius +\r\n        radius *\r\n          Math.sin(\r\n            (i -\r\n              (a / 2 -\r\n                3 * radius +\r\n                (Math.PI * radius) / 2 +\r\n                b)) /\r\n              radius,\r\n          ) -\r\n        pointR / 2\r\n      }px;\r\n      `,\r\n        }),\r\n      );\r\n    } else if (\r\n      i <\r\n      (3 * a) / 2 - 5 * radius + Math.PI * radius + b\r\n    ) {\r\n      border.appendChild(\r\n        elt('div', {\r\n          class: 'point',\r\n          id: `point${i}`,\r\n          style: `width:${pointR}px; height:${pointR}px;\r\n      left:${\r\n        rect.left +\r\n        a -\r\n        radius -\r\n        i +\r\n        a / 2 -\r\n        3 * radius +\r\n        Math.PI * radius +\r\n        b -\r\n        pointR / 2\r\n      }px ; \r\n      top:${rect.top + b - pointR / 2}px;\r\n      `,\r\n        }),\r\n      );\r\n    } else if (\r\n      i <\r\n      (3 * a) / 2 -\r\n        5 * radius +\r\n        (3 * Math.PI * radius) / 2 +\r\n        b\r\n    ) {\r\n      rel =\r\n        i -\r\n        ((3 * a) / 2 - 5 * radius + Math.PI * radius + b); // rel is i -(section start)\r\n      angle = Math.PI / 2 + rel / radius;\r\n      border.appendChild(\r\n        elt('div', {\r\n          class: 'point',\r\n          id: `point${i}`,\r\n          style: `width:${pointR}px; height:${pointR}px;\r\n      left:${\r\n        rect.left +\r\n        radius +\r\n        radius * Math.cos(-angle) -\r\n        pointR / 2\r\n      }px ; \r\n      top:${\r\n        rect.top +\r\n        b -\r\n        radius -\r\n        radius * Math.sin(-angle) -\r\n        pointR / 2\r\n      }px;\r\n      `,\r\n        }),\r\n      );\r\n    } else if (\r\n      i <\r\n      (3 * a) / 2 -\r\n        7 * radius +\r\n        (3 * Math.PI * radius) / 2 +\r\n        2 * b\r\n    ) {\r\n      rel =\r\n        i -\r\n        ((3 * a) / 2 -\r\n          5 * radius +\r\n          (3 * Math.PI * radius) / 2 +\r\n          b); // rel is i -(section start)\r\n      border.appendChild(\r\n        elt('div', {\r\n          class: 'point',\r\n          id: `point${i}`,\r\n          style: `width:${pointR}px; height:${pointR}px;\r\n      left:${rect.left - pointR / 2}px ; \r\n      top:${rect.top + b - radius - rel - pointR / 2}px;\r\n      `,\r\n        }),\r\n      );\r\n    } else if (\r\n      i <\r\n      (3 * a) / 2 -\r\n        7 * radius +\r\n        2 * Math.PI * radius +\r\n        2 * b\r\n    ) {\r\n      rel =\r\n        i -\r\n        ((3 * a) / 2 -\r\n          7 * radius +\r\n          (3 * Math.PI * radius) / 2 +\r\n          2 * b); // rel is i -(section start)\r\n      border.appendChild(\r\n        elt('div', {\r\n          class: 'point',\r\n          id: `point${i}`,\r\n          style: `width:${pointR}px; height:${pointR}px;\r\n      left:${\r\n        rect.left +\r\n        radius -\r\n        radius * Math.cos(rel / radius) -\r\n        pointR / 2\r\n      }px ; \r\n      top:${\r\n        rect.top +\r\n        radius -\r\n        radius * Math.sin(rel / radius) -\r\n        pointR / 2\r\n      }px;\r\n      `,\r\n        }),\r\n      );\r\n    } else {\r\n      rel =\r\n        i -\r\n        ((3 * a) / 2 -\r\n          7 * radius +\r\n          2 * Math.PI * radius +\r\n          2 * b); // rel is i -(section start)\r\n      border.appendChild(\r\n        elt('div', {\r\n          class: 'point',\r\n          id: `point${i}`,\r\n          style: `width:${pointR}px; height:${pointR}px;\r\n      left:${rect.left + radius + rel - pointR / 2}px ; \r\n      top:${rect.top - pointR / 2}px;\r\n      `,\r\n        }),\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\n////////////////////////////////////////////////////////////////////\r\n// Console Functionality\r\n// 1) Loading the page and drawing the console\r\nlet listenForEnter = true;\r\n//  c) Add the EnterKey functionality\r\nif (form)\r\n  form.addEventListener('keydown', async (e) => {\r\n    if (e.key == 'Enter') {\r\n      e.preventDefault();\r\n      if (listenForEnter) {\r\n        // If the answer is right\r\n        if (answerAccepted(solutions, form.value)) {\r\n          listenForEnter = false;\r\n          showPop('correct', level);\r\n          sendResultAndUpdate(true).then(() => {\r\n            startTheFormTimer(timeUp);\r\n            clearInterval(sessionTimer);\r\n            sessionTimer = setInterval(\r\n              updateSessionTimerDisplay,\r\n              100,\r\n            );\r\n            form.value = '';\r\n            listenForEnter = true;\r\n          });\r\n\r\n          // If the answer is wrong\r\n        } else {\r\n          wrongAnswerReturned();\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n// d) time manangement\r\n\r\nfunction updateSessionTimerDisplay() {\r\n  timeplayingval += 100;\r\n  document.getElementById('timeplaying').innerText =\r\n    convertMsToTime(timeplayingval);\r\n}\r\n\r\n// c) settings management\r\nconst soundControl = document.getElementById('sound');\r\nconst blurredControl = document.getElementById('blurred');\r\nconst soundControlBox = document.getElementById('soundBox');\r\nconst blurredControlBox =\r\n  document.getElementById('blurredBox');\r\nconst timerControl = document.getElementById('timer1020');\r\nconst timerControlBox =\r\n  document.getElementById('timer1020Box');\r\n\r\nconst soundStatus = async (onORoff) => {\r\n  sound = onORoff === 'On';\r\n  soundControl.src = `/img/sound${onORoff}.png`;\r\n  await axios.post('/api/v1/gameData/updateGameSettings', {\r\n    sound,\r\n  });\r\n};\r\n\r\nconst blurredStatus = async (onORoff) => {\r\n  blurred = onORoff === 'On';\r\n  blurredControl.src = `/img/blurred${onORoff}.png`;\r\n  await axios.post('/api/v1/gameData/updateGameSettings', {\r\n    blurred,\r\n  });\r\n};\r\n\r\nif (soundControl)\r\n  soundControlBox.addEventListener('click', async (e) => {\r\n    if (soundControl.src.match(`/img/soundOff.png`)) {\r\n      soundStatus('On');\r\n    } else {\r\n      soundStatus('Off');\r\n      blurredStatus('Off');\r\n      document.getElementById('racetrack').style =\r\n        'visibility:visible';\r\n    }\r\n  });\r\n\r\nif (blurredControl)\r\n  blurredControlBox.addEventListener('click', async (e) => {\r\n    if (blurredControl.src.match(`/img/blurredOff.png`)) {\r\n      blurredStatus('On');\r\n      soundStatus('On');\r\n      // raceTrack[0].style =\r\n      //   'color: #1b1b1b; font-size: 50px;';\r\n      document.getElementById('racetrack').style =\r\n        'visibility:hidden';\r\n    } else {\r\n      blurredStatus('Off');\r\n      // raceTrack[0].style = 'color: white; font-size: 50px;';\r\n      document.getElementById('racetrack').style =\r\n        'visibility:visible';\r\n    }\r\n  });\r\n\r\nif (timerControl)\r\n  timerControlBox.addEventListener('click', async (e) => {\r\n    if (timerControl.innerText === '10s') {\r\n      timerControl.innerText = '20s';\r\n      timeUp = 20;\r\n      await axios.post(\r\n        '/api/v1/gameData/updateGameSettings',\r\n        {\r\n          timer: false,\r\n        },\r\n      );\r\n    } else {\r\n      timerControl.innerText = '10s';\r\n      timeUp = 10;\r\n      await axios.post(\r\n        '/api/v1/gameData/updateGameSettings',\r\n        {\r\n          timer: true,\r\n        },\r\n      );\r\n    }\r\n  });\r\n\r\n////////////////////////////////////////////////////\r\n///////////// Draw the border and SpeakText\r\nif (form) {\r\n  drawFormBorder();\r\n  updateColor();\r\n  updateSessionTimerDisplay();\r\n}\r\n\r\n////////////////////////////////////////////////////////////////////\r\n// Form page elements\r\nconst loginForm = document.getElementById('loginform');\r\nconst signupForm = document.getElementById('signupform');\r\nconst logoutBtn = document.getElementById('logoutBtn');\r\nconst sendCodeForm = document.getElementById(\r\n  'forgotpasswordform',\r\n);\r\nconst resetPasswordBtn = document.getElementById(\r\n  'resetpasswordform',\r\n);\r\n\r\n//////////\r\n\r\nif (loginForm)\r\n  loginForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    const email = document.getElementById('email').value;\r\n    const password =\r\n      document.getElementById('password').value;\r\n    login(email, password);\r\n  });\r\n\r\nif (signupForm)\r\n  signupForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    const username =\r\n      document.getElementById('username').value;\r\n    const email = document.getElementById('email').value;\r\n    const password =\r\n      document.getElementById('password').value;\r\n    const passwordConfirm = document.getElementById(\r\n      'passwordConfirm',\r\n    ).value;\r\n    signup(username, email, password, passwordConfirm);\r\n  });\r\n\r\nif (logoutBtn)\r\n  logoutBtn.addEventListener('click', (e) => {\r\n    logout();\r\n  });\r\n\r\nif (sendCodeForm)\r\n  sendCodeForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    const email = document.getElementById('email').value;\r\n    forgotPasswordSendCode(email);\r\n  });\r\n\r\nif (resetPasswordBtn)\r\n  resetPasswordBtn.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    const token = document.getElementById('token').value;\r\n    const password =\r\n      document.getElementById('password').value;\r\n    const passwordConfirm = document.getElementById(\r\n      'passwordConfirm',\r\n    ).value;\r\n    resetPasswordUsingCode(\r\n      token,\r\n      password,\r\n      passwordConfirm,\r\n    );\r\n  });\r\n\r\n///////////////////////////////////////////////////////////////////\r\n///// DICTIONARY SEARCH ELEMENTS\r\n\r\nconst searchform = document.getElementById(\r\n  'searchdictionary',\r\n);\r\n\r\nconst searchAndUpdateValue = () =>\r\n  searchAndUpdate(searchform.value);\r\n\r\nif (searchform) {\r\n  searchAndUpdateValue();\r\n  searchform.addEventListener('keydown', async (e) => {\r\n    clearTimeout(responseTimer);\r\n    responseTimer = setTimeout(searchAndUpdateValue, 500);\r\n  });\r\n}\r\n\r\n///////////////////////////////////////////////////////////////////\r\n///// Handling Keyboard Visibility for Phones and Tablets\r\n\r\nconst applyStyles = () => {\r\n  speakText(raceTrack[0].innerText, speechLang);\r\n  document\r\n    .querySelector('header')\r\n    .classList.add('apply-styles-A');\r\n  document\r\n    .getElementsByClassName('logo_container')[0]\r\n    .classList.add('apply-styles-B');\r\n  document\r\n    .getElementsByClassName('filler_block')[0]\r\n    .classList.add('apply-styles-B');\r\n  window.scrollTo({\r\n    top: 0,\r\n    behavior: 'auto',\r\n  });\r\n};\r\n\r\nconst removeStyles = () => {\r\n  document\r\n    .querySelector('header')\r\n    .classList.remove('apply-styles-A');\r\n  document\r\n    .getElementsByClassName('logo_container')[0]\r\n    .classList.remove('apply-styles-B');\r\n  document\r\n    .getElementsByClassName('filler_block')[0]\r\n    .classList.remove('apply-styles-B');\r\n};\r\n\r\nif (form) {\r\n  form.addEventListener('click', applyStyles);\r\n  form.addEventListener('blur', removeStyles);\r\n}\r\n","import { showAlert } from './alerts.mjs';\r\n\r\nexport const login = async (email, password) => {\r\n  try {\r\n    const res = await axios.post('/api/v1/users/login', {\r\n      email,\r\n      password,\r\n    });\r\n    if (res.data.status === 'success')\r\n      showAlert('success', 'Logged in successfully');\r\n    window.setTimeout(() => {\r\n      location.assign('/');\r\n    }, 1500);\r\n  } catch (err) {\r\n    showAlert('error', err.response.data.msg);\r\n    const test = document.getElementById('forgotP');\r\n    if (!test) {\r\n      const forgotP = document.createElement('a');\r\n      forgotP.id = 'forgotP';\r\n      forgotP.innerHTML = 'Forgot Password?';\r\n      forgotP.className = 'form_btn';\r\n      forgotP.href = '/forgot-password';\r\n      document\r\n        .getElementById('formholder')\r\n        .appendChild(forgotP);\r\n    }\r\n  }\r\n};\r\n\r\nexport const logout = async () => {\r\n  try {\r\n    const res = await axios.get('/api/v1/users/logout');\r\n    if (res.data.status === 'success') {\r\n      showAlert('success', 'Logged out successfully!');\r\n      window.setTimeout(() => {\r\n        location.assign('/');\r\n      }, 1500);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', 'Error logging out! Try again.');\r\n  }\r\n};\r\n\r\nexport const signup = async (\r\n  username,\r\n  email,\r\n  password,\r\n  passwordConfirm,\r\n) => {\r\n  try {\r\n    const res = await axios.post('/api/v1/users/signup', {\r\n      username,\r\n      email,\r\n      password,\r\n      passwordConfirm,\r\n    });\r\n\r\n    if (res.data.status === 'success')\r\n      showAlert('success', 'New account created!');\r\n\r\n    window.setTimeout(() => {\r\n      location.assign('/');\r\n    }, 1500);\r\n  } catch (err) {\r\n    showAlert('error', err);\r\n  }\r\n};\r\n\r\nexport const forgotPasswordSendCode = async (email) => {\r\n  try {\r\n    const res = await axios.post(\r\n      '/api/v1/users/forgotPassword',\r\n      {\r\n        email,\r\n      },\r\n    );\r\n    if (res.data.status === 'success')\r\n      showAlert('success', 'Code has been sent');\r\n    window.setTimeout(() => {\r\n      location.assign(`/password-reset?email=${email}`);\r\n    }, 1500);\r\n  } catch (err) {\r\n    showAlert('error', err.response.data.msg);\r\n  }\r\n};\r\n\r\nexport const resetPasswordUsingCode = async (\r\n  token,\r\n  password,\r\n  passwordConfirm,\r\n) => {\r\n  try {\r\n    const res = await axios.patch(\r\n      '/api/v1/users/resetPassword',\r\n      {\r\n        token,\r\n        password,\r\n        passwordConfirm,\r\n      },\r\n    );\r\n    if (res.data.status === 'success')\r\n      showAlert('success', 'Password updated successfully');\r\n    window.setTimeout(() => {\r\n      location.assign('/');\r\n    }, 3000);\r\n  } catch (err) {\r\n    showAlert('error', err.response.data.msg);\r\n  }\r\n};\r\n"],"names":["hideAlert","el","document","querySelector","parentElement","removeChild","showAlert","type","msg","markup","insertAdjacentHTML","window","setTimeout","hidePop","showPop","level","pop","createElement","setAttribute","innerHTML","getElementById","appendChild","timeOut","i","interval","setInterval","clearTimeout","showDicAlert","normAndRemoveSpace","inputString","accentsMap","toLowerCase","replace","matched","normalize","elt","name","attrs","children","dom","attr","Object","keys","child","padTo2Digits","num","toString","padStart","hidden","visible","addWordToQueue","async","e","target","parentNode","firstChild","innerText","axios","post","data","status","raceTrack","tail","push","formColor","responseTimer","intervalTimer","sessionTimer","rect","pointR","a","b","radius","perimeter","timeplayingval","solutions","tries","speechLang","form","due","steps","timeplaying","time","timeUp","JSON","parse","style","borderRadius","left","top","clientWidth","clientHeight","slice","Math","PI","rel","angle","border","startTheFormTimer","timer","showBorder","hideTheBorderInSeconds","wrongAnswerReturned","visibility","delay","clearInterval","j","step","wrongWiggle","updateColor","updateSessionTimerDisplay","sendResultAndUpdate","then","value","backgroundColor","updateBorderColor","speakText","text","language","soundControl","src","match","utterance","SpeechSynthesisUtterance","lang","speechSynthesis","speak","correct","res","updateRaceTrackAndStats","attempt","err","requestAnimationFrame","animate","lastTime","sin","cos","newTime","stats","floor","blurred","listenForEnter","milliseconds","seconds","minutes","hours","convertMsToTime","addEventListener","key","preventDefault","answer","map","sol","includes","answerAccepted","blurredControl","soundControlBox","blurredControlBox","timerControl","timerControlBox","soundStatus","onORoff","sound","blurredStatus","class","id","drawFormBorder","loginForm","signupForm","logoutBtn","sendCodeForm","resetPasswordBtn","email","password","location","assign","response","forgotP","className","href","login","username","passwordConfirm","signup","get","logout","forgotPasswordSendCode","token","patch","resetPasswordUsingCode","searchform","searchAndUpdateValue","pattern","table","tbody","row","result","dicEntries","translate","createTextNode","split","join","searchAndUpdate","applyStyles","classList","add","getElementsByClassName","scrollTo","behavior","removeStyles","remove"],"mappings":"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"}